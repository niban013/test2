using System.Collections.Generic;
using System.Web.Mvc;

namespace YourApp.Controllers
{
    public class LocationController : Controller
    {
        // æ¨¡æ“¬è³‡æ–™ï¼ˆå¯¦å‹™ä¸Šå¯æ”¹æˆè³‡æ–™åº«å–å€¼ï¼‰
        private static readonly Dictionary<string, List<string>> CountryCityMap = new Dictionary<string, List<string>>
        {
            { "å°ç£", new List<string> { "å°åŒ—", "å°ä¸­", "é«˜é›„" } },
            { "æ—¥æœ¬", new List<string> { "æ±äº¬", "å¤§é˜ª", "äº¬éƒ½" } },
            { "ç¾åœ‹", new List<string> { "ç´ç´„", "æ´›æ‰ç£¯", "èŠåŠ å“¥" } }
        };

        // âœ… æä¾›å®Œæ•´è³‡æ–™ JSON çµ¦å‰ç«¯
        [HttpGet]
        public JsonResult GetData()
        {
            return Json(CountryCityMap, JsonRequestBehavior.AllowGet);
        }

        // âœ… ä¸»é 
        public ActionResult Index()
        {
            return View();
        }
    }
}


<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ğŸŒ åœ‹å®¶ - åŸå¸‚é›™å‘é€£å‹•ï¼ˆå°è£æ¨¡çµ„ï¼‰</title>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<style>
  select { margin: 10px; padding: 5px; width: 200px; }
</style>
</head>
<body>
<h2>ğŸŒ åœ‹å®¶ - åŸå¸‚é›™å‘é€£å‹•ï¼ˆå¯é‡é¸è«‹é¸é … + æ¨¡çµ„å°è£ï¼‰</h2>

<!-- ä½ å¯ä»¥å¤šçµ„ä½¿ç”¨ -->
<div class="location-group" data-group="1">
  <select class="select-country"></select>
  <select class="select-city"></select>
</div>

<hr>

<div class="location-group" data-group="2">
  <select class="select-country"></select>
  <select class="select-city"></select>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
/* -------------------------------
   âœ… æ¨¡æ“¬å¾Œç«¯è³‡æ–™
--------------------------------*/
const locationData = {
  "å°ç£": ["å°åŒ—", "å°ä¸­", "é«˜é›„"],
  "æ—¥æœ¬": ["æ±äº¬", "å¤§é˜ª", "äº¬éƒ½"],
  "ç¾åœ‹": ["ç´ç´„", "æ´›æ‰ç£¯", "èŠåŠ å“¥"]
};

/* -------------------------------
   âœ… å°è£æ¨¡çµ„ï¼šLocationSelector
--------------------------------*/
class LocationSelector {
  constructor($group, data) {
    this.data = data;
    this.$country = $group.find(".select-country");
    this.$city = $group.find(".select-city");
    this.cityToCountry = {};

    // å»ºç«‹åå‘ç´¢å¼•
    for (const country in data) {
      data[country].forEach(city => this.cityToCountry[city] = country);
    }

    this.initSelect2(this.$country);
    this.initSelect2(this.$city);
    this.loadCountries();
    this.loadCities();

    this.bindEvents();
  }

  initSelect2($el) {
    $el.select2({
      width: '200px',
      minimumResultsForSearch: Infinity // éš±è—æœå°‹æ¡†
    });
  }

  loadCountries(selected = "è«‹é¸åœ‹å®¶") {
    const $c = this.$country;
    $c.empty();
    $c.append(new Option("è«‹é¸åœ‹å®¶", "è«‹é¸åœ‹å®¶", selected === "è«‹é¸åœ‹å®¶", selected === "è«‹é¸åœ‹å®¶"));
    Object.keys(this.data).forEach(c => {
      const selectedFlag = c === selected;
      $c.append(new Option(c, c, selectedFlag, selectedFlag));
    });
    $c.val(selected).trigger("change.select2");
  }

  loadCities(country = "è«‹é¸åœ‹å®¶", selectedCity = "è«‹é¸åŸå¸‚") {
    const $c = this.$city;
    $c.empty();
    $c.append(new Option("è«‹é¸åŸå¸‚", "è«‹é¸åŸå¸‚", selectedCity === "è«‹é¸åŸå¸‚", selectedCity === "è«‹é¸åŸå¸‚"));

    let cities = [];
    if (!country || country === "è«‹é¸åœ‹å®¶") {
      for (let c in this.data) cities.push(...this.data[c]);
    } else {
      cities = this.data[country] || [];
    }

    cities.forEach(city => {
      const selectedFlag = city === selectedCity;
      $c.append(new Option(city, city, selectedFlag, selectedFlag));
    });
    $c.val(selectedCity).trigger("change.select2");
  }

  bindEvents() {
    this.$country.on("change", () => {
      const val = this.$country.val();
      if (val === "è«‹é¸åœ‹å®¶") {
        this.loadCities("è«‹é¸åœ‹å®¶", "è«‹é¸åŸå¸‚");
      } else {
        this.loadCities(val, "è«‹é¸åŸå¸‚");
      }
    });

    this.$city.on("change", () => {
      const city = this.$city.val();
      if (city === "è«‹é¸åŸå¸‚") {
        this.loadCountries("è«‹é¸åœ‹å®¶");
        this.loadCities("è«‹é¸åœ‹å®¶", "è«‹é¸åŸå¸‚");
        return;
      }

      const matchedCountry = this.cityToCountry[city];
      if (matchedCountry) {
        this.$country.val(matchedCountry).trigger("change.select2");
      }
    });
  }
}

/* -------------------------------
   âœ… åˆå§‹åŒ–å¤šçµ„ä¸‹æ‹‰
--------------------------------*/
$(document).ready(function() {
  $(".location-group").each(function() {
    new LocationSelector($(this), locationData);
  });
});
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>ğŸŒ åœ‹å®¶ - åŸå¸‚ - å€åŸŸ ä¸‰å±¤é€£å‹•å°è£</title>
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<style>
  select { margin: 10px; padding: 5px; width: 200px; }
</style>
</head>
<body>
<h2>ğŸŒ åœ‹å®¶ - åŸå¸‚ - å€åŸŸ ä¸‰å±¤é€£å‹•ï¼ˆå¯é‡é¸è«‹é¸é … + æ¨¡çµ„å°è£ï¼‰</h2>

<!-- å¯å¤šçµ„ä½¿ç”¨ -->
<div class="location-group" data-group="1">
  <select class="select-country"></select>
  <select class="select-city"></select>
  <select class="select-area"></select>
</div>

<hr>

<div class="location-group" data-group="2">
  <select class="select-country"></select>
  <select class="select-city"></select>
  <select class="select-area"></select>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<script>
/* -------------------------------
   âœ… æ¨¡æ“¬å¾Œç«¯è³‡æ–™
--------------------------------*/
const locationData = {
  "å°ç£": {
    "å°åŒ—": ["ä¸­æ­£å€", "å¤§å®‰å€", "ä¿¡ç¾©å€"],
    "å°ä¸­": ["åŒ—å€", "è¥¿å±¯å€", "å—å€"],
    "é«˜é›„": ["è‹“é›…å€", "å‰é‡‘å€", "å·¦ç‡Ÿå€"]
  },
  "æ—¥æœ¬": {
    "æ±äº¬": ["æ–°å®¿", "æ¸‹è°·", "å“å·"],
    "å¤§é˜ª": ["æ¢…ç”°", "é›£æ³¢", "å¿ƒé½‹æ©‹"],
    "äº¬éƒ½": ["ç¥‡åœ’", "åµå±±", "ä¼è¦‹"]
  },
  "ç¾åœ‹": {
    "ç´ç´„": ["æ›¼å“ˆé “", "å¸ƒé­¯å…‹æ—", "çš‡åå€"],
    "æ´›æ‰ç£¯": ["å¥½èŠå¡¢", "è–å¡”è«å°¼å¡", "æ¯”ä½›åˆ©å±±"],
    "èŠåŠ å“¥": ["å¸‚ä¸­å¿ƒ", "æ—è‚¯å…¬åœ’", "æµ·å¾·å…¬åœ’"]
  }
};

/* -------------------------------
   âœ… å°è£æ¨¡çµ„ï¼šLocationSelector ä¸‰å±¤
--------------------------------*/
class LocationSelector {
  constructor($group, data) {
    this.data = data;
    this.$country = $group.find(".select-country");
    this.$city = $group.find(".select-city");
    this.$area = $group.find(".select-area");

    // å»ºç«‹åå‘ç´¢å¼•
    this.cityToCountry = {};
    this.areaToCity = {};
    for (const country in data) {
      for (const city in data[country]) {
        this.cityToCountry[city] = country;
        data[country][city].forEach(area => this.areaToCity[area] = city);
      }
    }

    this.initSelect2(this.$country);
    this.initSelect2(this.$city);
    this.initSelect2(this.$area);

    this.loadCountries();
    this.loadCities();
    this.loadAreas();

    this.bindEvents();
  }

  initSelect2($el) {
    $el.select2({
      width: '200px',
      minimumResultsForSearch: Infinity
    });
  }

  loadCountries(selected = "è«‹é¸åœ‹å®¶") {
    const $c = this.$country;
    $c.empty().append(new Option("è«‹é¸åœ‹å®¶", "è«‹é¸åœ‹å®¶", selected === "è«‹é¸åœ‹å®¶", selected === "è«‹é¸åœ‹å®¶"));
    Object.keys(this.data).forEach(c => {
      $c.append(new Option(c, c, c === selected, c === selected));
    });
    $c.val(selected).trigger("change.select2");
  }

  loadCities(country = "è«‹é¸åœ‹å®¶", selectedCity = "è«‹é¸åŸå¸‚") {
    const $c = this.$city;
    $c.empty().append(new Option("è«‹é¸åŸå¸‚", "è«‹é¸åŸå¸‚", selectedCity === "è«‹é¸åŸå¸‚", selectedCity === "è«‹é¸åŸå¸‚"));

    let cities = [];
    if (!country || country === "è«‹é¸åœ‹å®¶") {
      for (let c in this.data) cities.push(...Object.keys(this.data[c]));
    } else {
      cities = Object.keys(this.data[country] || {});
    }

    cities.forEach(city => $c.append(new Option(city, city, city === selectedCity, city === selectedCity)));
    $c.val(selectedCity).trigger("change.select2");
  }

  loadAreas(city = "è«‹é¸åŸå¸‚", selectedArea = "è«‹é¸å€åŸŸ") {
    const $a = this.$area;
    $a.empty().append(new Option("è«‹é¸å€åŸŸ", "è«‹é¸å€åŸŸ", selectedArea === "è«‹é¸å€åŸŸ", selectedArea === "è«‹é¸å€åŸŸ"));

    let areas = [];
    if (!city || city === "è«‹é¸åŸå¸‚") {
      // é¡¯ç¤ºæ‰€æœ‰å€åŸŸ
      for (const country in this.data) {
        for (const c in this.data[country]) {
          areas.push(...this.data[country][c]);
        }
      }
    } else {
      const country = this.cityToCountry[city];
      areas = this.data[country][city] || [];
    }

    areas.forEach(area => $a.append(new Option(area, area, area === selectedArea, area === selectedArea)));
    $a.val(selectedArea).trigger("change.select2");
  }

  bindEvents() {
    // åœ‹å®¶ â†’ åŸå¸‚
    this.$country.on("change", () => {
      const val = this.$country.val();
      this.loadCities(val, "è«‹é¸åŸå¸‚");
      this.loadAreas("è«‹é¸åŸå¸‚", "è«‹é¸å€åŸŸ");
    });

    // åŸå¸‚ â†’ åœ‹å®¶ & å€åŸŸ
    this.$city.on("change", () => {
      const city = this.$city.val();
      if (city === "è«‹é¸åŸå¸‚") {
        this.loadCountries("è«‹é¸åœ‹å®¶");
        this.loadCities("è«‹é¸åœ‹å®¶", "è«‹é¸åŸå¸‚");
        this.loadAreas("è«‹é¸åŸå¸‚", "è«‹é¸å€åŸŸ");
        return;
      }

      const matchedCountry = this.cityToCountry[city];
      if (matchedCountry) this.$country.val(matchedCountry).trigger("change.select2");

      this.loadAreas(city, "è«‹é¸å€åŸŸ");
    });

    // å€åŸŸ â†’ åŸå¸‚ & åœ‹å®¶
    this.$area.on("change", () => {
      const area = this.$area.val();
      if (area === "è«‹é¸å€åŸŸ") return;

      const city = this.areaToCity[area];
      if (city) {
        this.$city.val(city).trigger("change.select2");
        const country = this.cityToCountry[city];
        if (country) this.$country.val(country).trigger("change.select2");
      }
    });
  }
}

/* -------------------------------
   âœ… åˆå§‹åŒ–å¤šçµ„ä¸‹æ‹‰
--------------------------------*/
$(document).ready(function() {
  $(".location-group").each(function() {
    new LocationSelector($(this), locationData);
  });
});
</script>
</body>
</html>


using System;
using System.Collections.Generic;
using Newtonsoft.Json;

class Program
{
    static void Main()
    {
        var locationData = new Dictionary<string, Dictionary<string, List<string>>>
        {
            ["å°ç£"] = new Dictionary<string, List<string>>
            {
                ["å°åŒ—"] = new List<string>{ "ä¸­æ­£å€", "å¤§å®‰å€" },
                ["å°ä¸­"] = new List<string>{ "åŒ—å€", "è¥¿å±¯å€" }
            },
            ["æ—¥æœ¬"] = new Dictionary<string, List<string>>
            {
                ["æ±äº¬"] = new List<string>{ "æ–°å®¿", "æ¸‹è°·" },
                ["å¤§é˜ª"] = new List<string>{ "æ¢…ç”°", "é›£æ³¢" }
            },
            ["ç¾åœ‹"] = new Dictionary<string, List<string>>
            {
                ["ç´ç´„"] = new List<string>{ "æ›¼å“ˆé “", "å¸ƒé­¯å…‹æ—" },
                ["æ´›æ‰ç£¯"] = new List<string>{ "å¥½èŠå¡¢", "æ¯”ä½›åˆ©å±±" }
            }
        };

        string json = JsonConvert.SerializeObject(locationData, Formatting.Indented);
        Console.WriteLine(json);
    }
}

using System;
using System.Collections.Generic;
using Newtonsoft.Json;

class Program
{
    static void Main()
    {
        var locationData = new Dictionary<string, Dictionary<string, List<string>>>
        {
            ["å°ç£"] = new Dictionary<string, List<string>>
            {
                ["å°åŒ—"] = new List<string>{ "ä¸­æ­£å€", "å¤§å®‰å€" },
                ["å°ä¸­"] = new List<string>{ "åŒ—å€", "è¥¿å±¯å€" }
            },
            ["æ—¥æœ¬"] = new Dictionary<string, List<string>>
            {
                ["æ±äº¬"] = new List<string>{ "æ–°å®¿", "æ¸‹è°·" },
                ["å¤§é˜ª"] = new List<string>{ "æ¢…ç”°", "é›£æ³¢" }
            },
            ["ç¾åœ‹"] = new Dictionary<string, List<string>>
            {
                ["ç´ç´„"] = new List<string>{ "æ›¼å“ˆé “", "å¸ƒé­¯å…‹æ—" },
                ["æ´›æ‰ç£¯"] = new List<string>{ "å¥½èŠå¡¢", "æ¯”ä½›åˆ©å±±" }
            }
        };

        string json = JsonConvert.SerializeObject(locationData, Formatting.Indented);
        Console.WriteLine(json);
    }
}



